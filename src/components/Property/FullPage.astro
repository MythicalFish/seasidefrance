---
import { marked } from 'marked';
import PropertyPhotos from '../PropertyPhotos.astro';
import PropertyIntro from '../PropertyIntro.astro';
import AvailablePeriods from '../AvailablePeriods';
import FeatureList from '../FeatureList';

const { property } = Astro.props;
const { lodgify } = property;
const descriptionHtml = property.description ? marked.parse(property.description) : '';
console.log(property);
---

<div>
  <div class="flex flex-col lg:flex-row gap-4">
    <div class="flex-auto lg:w-2/3">
      <PropertyPhotos property={property} layout="gallery" class="mb-4" />
    </div>
    <div class="flex-auto lg:w-1/3">
      <PropertyIntro property={property} className="mb-8" />
      <AvailablePeriods
        client:load
        propertyId={property.id}
        rates={property.rates}
        availability={property.availability}
        currencyCode={lodgify.currencyCode}
        limit={8}
      />
    </div>
  </div>
  <div class="mt-4" set:html={descriptionHtml} />
  <div class="mt-4 flex">
    <FeatureList title="Features" items={property.features} />
    <FeatureList title="Highlights" items={property.highlights} />
  </div>
</div>
