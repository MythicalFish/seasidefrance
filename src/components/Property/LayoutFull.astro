---
import { marked } from 'marked';
import PropertyPhotos from '../PropertyPhotos.astro';
import PropertyIntro from '../PropertyIntro.astro';
import AvailablePeriods from '../AvailablePeriods';
import FeatureList from '../FeatureList';

const { property } = Astro.props;
const { lodgify } = property;
const descriptionHtml = property.description ? marked.parse(property.description) : '';
---

<div>
  <div class="flex flex-col lg:flex-row gap-8">
    <div class="flex-auto w-full max-w-[65ch]">
      <PropertyIntro property={property} className="mb-4" />
      <PropertyPhotos property={property} layout="gallery" class="mb-4" />
    </div>
    <div class="flex-auto w-full">
      <div class="p-8 border border-gray-200 rounded-lg shadow-lg">
        <div class="prose mb-4">
          <h4 class="">Book your stay</h4>
        </div>
        <AvailablePeriods
          client:load
          propertyId={property.id}
          rates={property.rates}
          availability={property.availability}
          currencyCode={lodgify.currencyCode}
          limit={6}
        />
      </div>
    </div>
  </div>
  <div class="mt-4 prose" set:html={descriptionHtml} />
  <div class="mt-4 flex">
    <FeatureList title="Features" items={property.features} />
    <FeatureList title="Highlights" items={property.highlights} />
  </div>
</div>
