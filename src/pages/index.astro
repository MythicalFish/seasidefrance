---
import Layout from '../layouts/Layout.astro';
import Hero from '../modules/Hero.astro';
import photo1 from '../images/old/chateau-pool-1.jpg';
import properties from '../data/properties';
import { currencySymbol } from '../lib/utils';
import AvailablePeriods from '../components/AvailablePeriods';
---

<Layout>
  <section class="mx-auto">
    {
      properties.map(({ lodgify, ...property }) => (
        <div class="block bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
          {lodgify.imageUrl && (
            <img
              src={
                lodgify.imageUrl.startsWith('//') ? `https:${lodgify.imageUrl}` : lodgify.imageUrl
              }
              alt={property.name}
              class="w-full h-48 object-cover"
            />
          )}
          <div class="p-6">
            <h3 class="text-xl font-semibold mb-2">{property.title}</h3>
            <p class="text-gray-600 mb-4">{property.intro}</p>
            <div class="flex justify-between items-center">
              <span class="text-lg font-medium">
                From {`${currencySymbol(lodgify.currencyCode)}${lodgify.minPrice}`} per night
              </span>
            </div>
            <AvailablePeriods
              client:load
              useSwiper
              propertyId={property.id}
              rates={property.rates}
              availability={property.availability}
              currencyCode={lodgify.currencyCode}
              limit={8}
            />
          </div>
        </div>
      ))
    }
  </section>
</Layout>
