---
import Availability from '@modules/Availability';
import Layout from '@modules/Layout/index.astro';
import SiteHeader from '@modules/Layout/SiteHeader';
import getSearchResults from '@lib/getSearchResults';
import Box from '@components/Box/index.astro';
import WhyVisit2 from '@data/_fixtures/why-visit-2.md';
import PropertyList from '@modules/PropertyList/index.astro';
import PhotoBG from '@components/PhotoBG/index.astro';
import WhyVisit1 from '@data/_fixtures/why-visit-1.md';
import Button from '@components/Button';
import AreaPhotos from '@components/AreaPhotos/index.astro';
import properties from '@data/properties';
import SpecialOffers from '@components/SpecialOffers/index.astro';

const searchResults = getSearchResults(properties);
const { showMore = false, page = 'home' } = Astro.props;
---

<Layout>
  <SiteHeader client:load page={page} />
  <main>
    <div class="grid grid-cols-1 lg:grid-cols-2">
      <PhotoBG
        className="h-full"
        contentClassName="max-w-[640px] w-full mx-auto lg:mr-0 flex items-center justify-center"
      >
        <SpecialOffers />
      </PhotoBG>
      <div class="bg-waves">
        <div class="h-full max-w-[640px] w-full mx-auto lg:ml-0 flex items-center justify-center">
          <div class="py-16 px-8 md:px-16">
            <div class="prose text-white text-center">
              <h2 class="mb-4 text-white text-3xl font-medium">Discover Charente-Maritime</h2>
              <WhyVisit1 />
            </div>
            <AreaPhotos className="my-8" />
            <div class="text-center">
              <Button variant="secondary" href="/#about-the-area"> Read more </Button>
            </div>
          </div>
        </div>
      </div>
    </div>
    {
      showMore && (
        <Box cozy class="mb-8">
          <div class="prose" id="about-the-area">
            <WhyVisit2 />
          </div>
        </Box>
      )
    }
    <div class="container">
      <div class="pt-4 md:pt-8">
        <Availability properties={properties} client:visible initialResults={searchResults} />
        <!-- <PropertyList title="Other properties" /> -->
      </div>
    </div>
  </main>
</Layout>
